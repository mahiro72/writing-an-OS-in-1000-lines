

- __volatile__
  - 最適化せずそのままasmを実行する



__asm__ __volatile__("アセンブリ" : 出力オペランド : 入力オペランド : アセンブリ中で破壊するレジスタ);

- 出力オペランド
  - =r
  - =は書き込み専用を示す
- 入力オペランド
  - r
  - 読み取り専用
- 破壊するレジスタ
  - 実行するアセンブリで使用するレジスタを指定する
  - asm実行中は元の値を一時的にスタックに待避させ、そのレジスタを利用。処理完了後にスタックから取り出し元の値を入れる
    - インラインアセンブリを高速に行うためにメモリ参照をさけ、レジスタを利用している
- 補足
  - rはレジスタを使ってというコンパイラへの命令

```c
// input = 5
// result は未初期化

__asm__(
   "add %0, %1, %2"    // add  出力レジスタ, inputの値, 1
   : "=r"(result)      // %0: 計算結果をresultに格納
   : "r"(input),       // %1: inputの値（5）
     "r"(1)            // %2: 即値1
);

// 結果: result = 6  (5 + 1)
```